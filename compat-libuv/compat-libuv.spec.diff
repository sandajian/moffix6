--- compat-libuv.spec.old	2015-02-25 07:39:26.000000000 +0800
+++ compat-libuv.spec	2016-12-07 20:57:22.000000000 +0800
@@ -2,7 +2,7 @@
 #this should be changed to %%{version} in unstable (odd numbered) releases
 %global sover 0.10
 
-Name: libuv
+Name: compat-libuv
 Epoch:   1
 Version: 0.10.34
 Release: 1%{?dist}
@@ -12,7 +12,7 @@
 # the licensing breakdown is described in detail in the LICENSE file
 License: MIT and BSD and ISC
 URL: http://libuv.org/
-Source0: http://libuv.org/dist/v%{version}/%{name}-v%{version}.tar.gz
+Source0: http://libuv.org/dist/v%{version}/libuv-v%{version}.tar.gz
 Source2: libuv.pc.in
 
 BuildRequires: gyp
@@ -24,27 +24,8 @@
 Windows and libev on Unix systems. We intend to eventually contain all platform
 differences in this library.
 
-%package devel
-Summary: Development libraries for libuv
-Group: Development/Libraries
-Requires: %{name}%{?_isa} = %{epoch}:%{version}-%{release}
-Requires: pkgconfig
-Requires(post): /sbin/ldconfig
-Requires(postun): /sbin/ldconfig
-
-%description devel
-Development libraries for libuv
-
-%package static
-Summary: Platform layer for node.js - static library
-Group:   Development/Libraries
-Requires:   %{name}-devel = %{epoch}:%{version}-%{release}
-
-%description static
-Static library (.a) version of libuv.
-
 %prep
-%setup -q -n %{name}-v%{version}
+%setup -q -n libuv-v%{version}
 
 %build
 export CFLAGS='%{optflags}'
@@ -66,35 +47,8 @@
 cp out-shared/Release/obj.target/libuv.so %{buildroot}/%{_libdir}/libuv.so.%{sover}
 pushd %{buildroot}/%{_libdir}/
 ln -s libuv.so.%{sover} libuv.so.0
-ln -s libuv.so.%{sover} libuv.so
 popd
 
-# Copy the headers into the include path
-mkdir -p %{buildroot}/%{_includedir}/uv-private
-
-cp include/uv.h \
-   %{buildroot}/%{_includedir}
-
-cp \
-   include/uv-private/ngx-queue.h \
-   include/uv-private/tree.h \
-   include/uv-private/uv-linux.h \
-   include/uv-private/uv-unix.h \
-   %{buildroot}/%{_includedir}/uv-private
-
-# Create the pkgconfig file
-mkdir -p %{buildroot}/%{_libdir}/pkgconfig
-
-sed -e "s#@prefix@#%{_prefix}#g" \
-    -e "s#@exec_prefix@#%{_exec_prefix}#g" \
-    -e "s#@libdir@#%{_libdir}#g" \
-    -e "s#@includedir@#%{_includedir}#g" \
-    -e "s#@version@#%{version}#g" \
-    %SOURCE2 > %{buildroot}/%{_libdir}/pkgconfig/libuv.pc
-
-#install the static version
-cp out-static/Release/obj.target/libuv.a %{buildroot}/%{_libdir}
-
 %check
 # Tests are currently disabled because some require network access
 # Working with upstream to split these out
@@ -108,16 +62,6 @@
 %doc README.md AUTHORS LICENSE
 %{_libdir}/libuv.so.*
 
-%files devel
-%doc README.md AUTHORS LICENSE
-%{_libdir}/libuv.so
-%{_libdir}/pkgconfig/libuv.pc
-%{_includedir}/uv.h
-%{_includedir}/uv-private
-
-%files static
-%{_libdir}/libuv.a
-
 %changelog
 * Tue Feb 24 2015 T.C. Hollingsworth <tchollingsworth@gmail.com> - 1:0.10.34-1
 - new upstream release 0.10.34
